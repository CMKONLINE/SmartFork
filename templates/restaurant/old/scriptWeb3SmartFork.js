var Web3 = require('web3');
var web3 = new Web3();
web3.setProvider(new web3.providers.HttpProvider("http://localhost:8545"));


// balance du compte 0
web3.fromWei(web3.eth.getBalance(web3.eth.accounts[0]), "ether").toNumber()

//signature
msg=web3.sha3("Ceci est un test")
signature = web3.eth.sign(web3.eth.accounts[2], msg)

// transfert d ether du compte 0 vers le compte 1
web3.eth.sendTransaction({from:web3.eth.accounts[0],to:web3.eth.accounts[1],value:web3.toWei(0.01,"ether")})


var premium = true ;
var restaurantContract = web3.eth.contract([{"constant":false,"inputs":[{"name":"com","type":"string"}],"name":"commente","outputs":[{"name":"ok","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"kill","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"paieAddition","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"chiffreAffaire","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"comments","outputs":[{"name":"addr","type":"address"},{"name":"message","type":"string"},{"name":"date","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"nbComments","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"inputs":[{"name":"premium","type":"bool"}],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"out","type":"address"}],"name":"Print","type":"event"}]);
var restaurant = restaurantContract.new(
   premium,
   {
     from: web3.eth.accounts[0], 
     data: '0x606060405260006000556000600455341561001657fe5b604051602080610c3e833981016040528080519060200190919050505b33600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600160146101000a81548160ff0219169083151502179055505b505b610b9e806100a06000396000f30060606040523615610076576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063363605451461007857806341c0e1b5146100ea578063783132ba146100fc578063848c2359146101065780638ebb4c151461012c578063a96892011461021c575bfe5b341561008057fe5b6100d0600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610242565b604051808215151515815260200191505060405180910390f35b34156100f257fe5b6100fa61066a565b005b6101046106fe565b005b341561010e57fe5b6101166108d9565b6040518082815260200191505060405180910390f35b341561013457fe5b61014a60048080359060200190919050506108df565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018060200183815260200182810382528481815460018160011615610100020316600290048152602001915080546001816001161561010002031660029004801561020b5780601f106101e05761010080835404028352916020019161020b565b820191906000526020600020905b8154815290600101906020018083116101ee57829003601f168201915b505094505050505060405180910390f35b341561022457fe5b61022c610928565b6040518082815260200191505060405180910390f35b6000600060006000600060006000600060006000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002080549050111561065357600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002097508760018980549050038154811015156102f557fe5b906000526020600020906006020160005b509650866003019550856001019450429350600085805460018160011615610100020316600290049050148015610345575062093a8087600201548503105b1561064e576060604051908101604052803373ffffffffffffffffffffffffffffffffffffffff1681526020018b81526020018581525060036000600454815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010190805190602001906103f492919061092e565b50604082015181600201559050506003600060046000815480929190600101919050558152602001908152602001600020876003016000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600182018160010190805460018160011615610100020316600290046104b79291906109ae565b50600282015481600201559050507fa8e608801119a422405d57e76518f793d972b389576b43d2e40d59d4dde10ff733604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a1600160149054906101000a900460ff1615610645578660000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169250600a876001015481151561057457fe5b0491508273ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051809050600060405180830381858888f1935050505015156105be576000985061065d565b81600060008282540392505081905550603287600101548115156105de57fe5b04905073be965ade05180186cdeeb1b31d4694bf5f4a55cb73ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051809050600060405180830381858888f193505050501561064357806000600082825403925050819055505b5b5b6001985061065d565b61065c565b6000985061065d565b5b5050505050505050919050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614156106fb57600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b670de0b6b3a76400003411156108d657600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480600101828161075f9190610a35565b916000526020600020906006020160005b6080604051908101604052803373ffffffffffffffffffffffffffffffffffffffff1681526020013481526020014281526020016060604051908101604052803373ffffffffffffffffffffffffffffffffffffffff1681526020016020604051908101604052806000815250815260200142815250815250909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550602082015181600101556040820151816002015560608201518160030160008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010190805190602001906108b592919061092e565b50604082015181600201555050505050346000600082825401925050819055505b5b565b60005481565b60036020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169080600101908060020154905083565b60045481565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061096f57805160ff191683800117855561099d565b8280016001018555821561099d579182015b8281111561099c578251825591602001919060010190610981565b5b5090506109aa9190610a67565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106109e75780548555610a24565b82800160010185558215610a2457600052602060002091601f016020900482015b82811115610a23578254825591600101919060010190610a08565b5b509050610a319190610a67565b5090565b815481835581811511610a6257600602816006028360005260206000209182019101610a619190610a8c565b5b505050565b610a8991905b80821115610a85576000816000905550600101610a6d565b5090565b90565b610b2791905b80821115610b235760006000820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600182016000905560028201600090556003820160006000820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600182016000610b109190610b2a565b6002820160009055505050600601610a92565b5090565b90565b50805460018160011615610100020316600290046000825580601f10610b505750610b6f565b601f016020900490600052602060002090810190610b6e9190610a67565b5b505600a165627a7a7230582098a0dc2ef995048fad26b312bf9b04af8da9dfdbdb423e758a1ba52b981d11e00029', 
     gas: '4700000'
   }, function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 })



restaurant.paieAddition.sendTransaction({from:web3.eth.accounts[1],value:web3.toWei('2','ether'),gas:210000});

restaurant.commente.sendTransaction("test",{from:web3.eth.accounts[1],gas:210000});


web3.eth.getTransaction('0xdadea8259317199605a1e88c4a3c3070222b98f4310d753b869ba8668652a212');

restaurant.comments.call(0);

restaurant.kill.sendTransaction({from:web3.eth.accounts[0]})